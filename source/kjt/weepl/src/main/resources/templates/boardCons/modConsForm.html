<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/consLayout}">

<th:block layout:fragment="css">
	<style>
.input-group {
	margin-bottom: 15px
}
</style>
</th:block>
<th:block layout:fragment="script">
	<script th:inline="javascript">
		$(document).ready(function(){
		  var errorMessage = [[${errorMessage}]];
		  if(errorMessage != null){
		  alert(errorMessage);
		  }
		bindDomEvent();
	  	});
		function bindDomEvent(){
			$(".custom-file-input").on("change", function() {
				var fileName = $(this).val().split("\\").pop(); //이미지 파일명
				var fileExt = fileName.substring(fileName.lastIndexOf(".")+1); // 확장자 추출
				fileExt = fileExt.toLowerCase(); //소문자 변환(이미지 확장자를 소문자로 통일하여 비교하기 위함)

				if(fileExt != "jpg" && fileExt != "jpeg" && fileExt != "gif" && fileExt != "png" && fileExt != "bmp"){

					alert("이미지 파일만 등록이 가능합니다."); <!-- 파일첨부 시 이미지 파일인지 검사한다. -->
					return;
				}
				
				$(this).siblings(".custom-file-label").html(fileName); <!-- 라벨 태그 안의 내용을 jquery의 .html()을 이용하여 파일명을 입력해준다. -->
			});
		}
	
	</script>
</th:block>
<div layout:fragment="content" class="content-wrapper">
	<form action="/boardCons/modCons" role="form" method="post" th:object="${boardConsFormDto}">
		<p class="h2">게시판 상담 수정</p>
		<input type="hidden" th:field="*{cd}"> 
		<div class="input-group">
			<div class="input-group-prepend">
				<span class="input-group-text">제목</span>
			</div>
			<input type="text" th:field="*{title}" class="form-control"
				placeholder="제목을 입력해주세요">
		</div>
		<p th:if="${#fields.hasErrors('title')}" th:errors="*{title}"
			class="fieldError">Incorrect data</p>

		<div class="input-group">
			<div class="input-group-prepend">
				<span class="input-group-text"> 신청 상세 내용</span>
			</div>
			<textarea class="form-control" aria-label="With textarea"
				th:field="*{content}"></textarea>
		</div>
		<div class="input-group">
			<div class="input-group-prepend">
				<span class="input-group-text">상담 비밀번호</span>
			</div>
			<input type="password" th:field="*{pwd}" class="form-control"
				placeholder="비밀번호 입력">
		</div>
		<p th:if="${#fields.hasErrors('pwd')}" th:errors="*{pwd}"
			class="fieldError">Incorrect data</p>

		<div style="text-align: center">
			<button
				th:formaction="@{'/boardCons/modCons/' + ${boardConsFormDto.cd} }"
				type="submit" class="btn btn-primary">수정하기</button>
		</div>
		<input type="hidden" th:name="${_csrf.parameterName}"
			th:value="${_csrf.token}">
	</form>
</div>
</html>