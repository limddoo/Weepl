<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/memberLayout}">
<!-- 사용자 CSS 추가 -->
<th:block layout:fragment="css">
	<style>
		.error {
			color: #bd2130;
		}
	</style>
</th:block>
<!-- 사용자 스크립트 추가 -->
<th:block layout:fragment="script">
	<script th:inline="javascript">
		function findPwd() {
			var _id = $('#id').val();
			if(_id=='') {
				alert("아이디를 입력하세요");
				$('#id').focus();
				return;
			}
			var name = $('#name').val();
			if(name=='') {
				alert("이름을 입력하세요");
				$('#name').focus();
				return;
			}
			var email = $('#email').val();
			if(email=='') {
				alert("이메일을 입력하세요");
				$('#email').focus();
				return;
			}
			$.ajax({
				type: "get",
				url: "/members/findPwdByEmail",
				data : { "id" : _id,
						 "name" : name,
						 "email" : email
				},
				contentType: "application/json",
				success: function(result){
					var result = result.result;
					console.log("result :" +result)
					if(result == "true"){
						alert('이메일을 확인해주세요.');
					}
					else{
						alert("일치하는 회원 정보가 없습니다.");
					}
				},
				error : function(){
						alert("에러발생");
				}
			});
			
		}
	</script>
</th:block>
<div layout:fragment="content">
	<form role="form" method="get" action="" th:object="${memberFormDto}" id="frm">
		<div class="form-group">
			<label th:for="id">아이디</label> <input type="text" th:field="*{id}"
				class="form-control" placeholder="아이디 입력">
		</div>
		<div class="form-group">
			<label th:for="name">이름</label> <input type="text" th:field="*{name}"
				class="form-control" placeholder="이름 입력">
		</div>
		<div class="form-group">
			<label th:for="email">이메일</label> <input type="email"
				th:field="*{email}" class="form-control" placeholder="이메일 입력">
		</div>
		<input type="button" class="btn btn-primary" onclick="findPwd()" value="비밀번호 찾기">
	</form>
</div>
</html>